## Copier Configuration
# https://copier.readthedocs.io/en/stable/configuring/
_subdirectory: skeleton
_answers_file: .copier-answers.copier-python-project.yml

# Questions
# For a complete list of prompt options, see https://copier.readthedocs.io/en/stable/configuring/#advanced-prompt-formatting
project_name:
  type: str
  help: Provide the project name (use kebab-case, e.g. my-project-name)

# Computed variables for different case formats
sanitized_project_name:
  type: str
  default: "{{ project_name | trim }}"
  when: false

project_name_kebab_case:
  type: str
  default: "{{ sanitized_project_name }}"
  when: false

project_name_snake_case:
  type: str
  default: "{{ sanitized_project_name | replace('-', '_') }}"
  when: false

project_name_flat_case:
  type: str
  default: "{{ sanitized_project_name | replace('-', '') }}"
  when: false

project_name_title_case:
  type: str
  default: "{{ sanitized_project_name | replace('-', ' ') | title }}"
  when: false

source_catalog_name:
  type: str
  default: "{{ project_name_snake_case }}"
  when: false

description:
  type: str
  help: Provide a short description of the project

specify_author:
  type: bool
  default: false
  help: Would you like to specify author information?

author_name:
  type: str
  help: Provide an author name in format "Firstname Lastname"
  when: "{{ specify_author }}"

author_email:
  type: str
  help: Provide the author's email address
  when: "{{ specify_author }}"

project_type:
  type: str
  help: Select the type of project
  choices:
    Empty: empty
    Docker: dockerized
    AWS Lambda: lambda

is_docker_project:
  type: bool
  default: "{{ project_type == 'dockerized' }}"
  when: false

is_lambda_project:
  type: bool
  default: "{{ project_type == 'lambda' }}"
  when: false

enforce_conventional_commits:
  type: bool
  default: true
  help: Enforce conventional commit messages in Git (needed for automatic GitHub releases)

automatic_gh_release:
  type: bool
  default: true
  help: Enable automatic GitHub releases based on conventional commits
  when: "{{ enforce_conventional_commits }}"

tasks:
  # Make entrypoint executable if it exists
  - [invoke, "chmod +x docker-entrypoint.sh || true", after-copy]
